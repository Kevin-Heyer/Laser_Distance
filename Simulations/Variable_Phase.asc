Version 4
SHEET 1 3932 1400
WIRE 1280 -144 1232 -144
WIRE 1408 -144 1360 -144
WIRE 2128 -80 2064 -80
WIRE 2240 -80 2192 -80
WIRE 736 -48 704 -48
WIRE 864 -48 816 -48
WIRE 1008 -48 864 -48
WIRE 1056 -48 1008 -48
WIRE 1232 -48 1232 -144
WIRE 1232 -48 1136 -48
WIRE 1280 -48 1232 -48
WIRE 1408 -32 1408 -144
WIRE 1408 -32 1344 -32
WIRE 1488 -32 1408 -32
WIRE 1568 -32 1488 -32
WIRE 1744 -32 1648 -32
WIRE 1840 -32 1744 -32
WIRE 1280 -16 1232 -16
WIRE 704 0 704 -48
WIRE 2064 0 2064 -80
WIRE 2112 0 2064 0
WIRE 2240 0 2240 -80
WIRE 2240 0 2192 0
WIRE 1008 48 1008 -48
WIRE 1072 48 1008 48
WIRE 1232 48 1232 -16
WIRE 1232 48 1136 48
WIRE 1232 64 1232 48
WIRE 1232 80 1232 64
WIRE 1840 96 1840 -32
WIRE 1888 96 1840 96
WIRE 2064 96 2064 0
WIRE 2064 96 1968 96
WIRE 2112 96 2064 96
WIRE 2240 112 2240 0
WIRE 2240 112 2176 112
WIRE 2320 112 2240 112
WIRE 2384 112 2320 112
WIRE 2496 112 2464 112
WIRE 2544 112 2496 112
WIRE 1136 128 1088 128
WIRE 1184 128 1136 128
WIRE 2112 128 2064 128
WIRE 2496 128 2496 112
WIRE 2496 208 2496 192
WIRE 800 240 768 240
WIRE 832 240 800 240
WIRE 944 240 912 240
WIRE 1856 256 1792 256
WIRE 2064 288 2064 128
WIRE 2064 288 2048 288
WIRE 1840 320 1840 96
WIRE 1856 320 1840 320
WIRE 800 352 800 240
WIRE 832 352 800 352
WIRE 944 368 944 240
WIRE 944 368 896 368
WIRE 1008 368 944 368
WIRE 832 384 768 384
WIRE 1088 384 1088 128
WIRE 1088 384 1072 384
WIRE 1120 384 1088 384
WIRE 1152 384 1120 384
WIRE 1856 384 1728 384
WIRE 1008 400 992 400
WIRE 992 448 992 400
FLAG 288 256 Vcc
FLAG 288 336 0
FLAG 432 336 0
FLAG 432 256 Vbias
FLAG 704 80 0
FLAG 864 -48 CLOCK
FLAG 1488 -32 PHASE_DELAY
FLAG 192 336 0
FLAG 192 256 Vs
FLAG 1744 -32 PHASE_DELAY_f
FLAG 1312 0 0
FLAG 1312 -64 Vcc
FLAG 1232 160 Vbias
FLAG 992 528 0
FLAG 2144 144 0
FLAG 2144 80 Vcc
FLAG 2320 112 Sig_Q
FLAG 2496 208 0
FLAG 2544 112 Sig_Q_f
FLAG 1664 400 0
FLAG 1952 192 Vcc
FLAG 2048 384 Vcc
FLAG 2016 496 0
FLAG 1888 496 0
FLAG 1792 256 Vbias
FLAG 1664 368 CLOCK
FLAG 1040 416 0
FLAG 1040 352 Vcc
FLAG 1152 384 Vg
FLAG 864 400 0
FLAG 864 336 Vcc
FLAG 688 240 Sig_Q_f
FLAG 768 384 Vbias
FLAG 1120 448 Vbias
SYMBOL voltage 288 240 R0
WINDOW 123 0 0 Left 0
SYMATTR SpiceLine Rser=0.2 Cpar=100u
SYMATTR InstName V1
SYMATTR Value {Vcc}
SYMBOL voltage 432 240 R0
WINDOW 123 0 0 Left 0
SYMATTR SpiceLine Rser=0.2 Cpar=100u
SYMATTR InstName V2
SYMATTR Value {Vbias}
SYMBOL voltage 704 -16 R0
WINDOW 123 24 152 Left 2
WINDOW 39 24 124 Left 2
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser=0.2 Cpar=1p
SYMATTR InstName V3
SYMATTR Value SINE({Vbias} 1 1Meg 0 0 0)
SYMBOL res 1152 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 100
SYMBOL voltage 192 240 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 0
SYMATTR Value 20
SYMATTR SpiceLine Rser=1m Cpar=100m
SYMATTR InstName V6
SYMBOL res 832 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1m
SYMBOL OpAmps\\UniversalOpamp2 1312 -32 R0
SYMATTR InstName U2
SYMATTR Value2 Avol=100Meg GBW=100Meg Slew=100Meg
SYMATTR SpiceLine Ilimit=25 Rail=0 Vos=0
SYMBOL res 1264 -160 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res 1552 -16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value 1m
SYMBOL cap 1136 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100p
SYMBOL njf 1184 64 R0
SYMATTR InstName J1
SYMATTR Value 2N3819
SYMBOL voltage 992 432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=10m Cpar=10u
SYMATTR InstName V4
SYMATTR Value PULSE(0.5 0.5 0 {tsim} 0 {tsim})
SYMBOL OpAmps\\UniversalOpamp2 2144 112 R0
SYMATTR InstName U1
SYMATTR Value2 Avol=100Meg GBW=100Meg Slew=100Meg
SYMATTR SpiceLine Ilimit=25 Rail=0 Vos=0
SYMBOL res 1984 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL res 2096 -16 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 200
SYMBOL cap 2480 128 R0
SYMATTR InstName C4
SYMATTR Value 47µ
SYMBOL Digital\\schmitt 1664 304 R0
WINDOW 3 -318 205 Left 2
SYMATTR Value Vhigh=3.3 Vt=1.65 Vh=.2 Trise=2.5n Tfall=2.5n
SYMATTR InstName A1
SYMBOL Switches\\ADG1519 1952 336 R0
SYMATTR InstName U3
SYMBOL cap 2192 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 100p
SYMBOL OpAmps\\UniversalOpamp2 1040 384 R0
SYMATTR InstName U4
SYMATTR Value2 Avol=100Meg GBW=100Meg Slew=100Meg
SYMATTR SpiceLine Ilimit=25 Rail=0 Vos=0
SYMBOL res 1120 32 R0
SYMATTR InstName R7
SYMATTR Value 10Meg
SYMBOL OpAmps\\UniversalOpamp2 864 368 R0
SYMATTR InstName U5
SYMATTR Value2 Avol=100Meg GBW=100Meg Slew=100Meg
SYMATTR SpiceLine Ilimit=25 Rail=0 Vos=0
SYMBOL res 928 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 5k
SYMBOL res 784 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL cap 1104 384 R0
SYMATTR InstName C6
SYMATTR Value 1n
SYMBOL ind 2480 96 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 1µ
SYMATTR SpiceLine Rser=4m Rpar=1k
TEXT 128 104 Left 2 !.PARAM Vbias=Vcc/2
TEXT 128 128 Left 2 !.param Vcc=3.3
TEXT 128 376 Left 2 ;.tran 0 {tsim} 0 {ts_max}
TEXT 128 56 Left 2 !.param ts_max=100
TEXT 128 80 Left 2 !.param tsim=20m
TEXT 128 152 Left 2 ;.step param phase 0 1.65 50m
TEXT 128 176 Left 2 !.options cshunt = 1e-14
TEXT 128 400 Left 2 !.ac dec 1024 10k 5G
TEXT 1272 40 Left 2 ;Phi = pi - 2atan(wRC)\nR(Phi = 90) = 1/(2pi*F*C)
TEXT 1128 240 Left 2 ;Rds = Vp / (2 * Idss (Vgs - Vp) )
TEXT 1128 296 Left 2 ;Vgs = Vp ( 1 + pi * C * F / ( Idss * tan( pi - phase ) ) )
TEXT 2288 8 Left 2 ;Phase = atan( ( Q - Vbias ) / ( I - Vbias ) )
TEXT 1248 160 Left 2 ;MMBFJ309LT1G
